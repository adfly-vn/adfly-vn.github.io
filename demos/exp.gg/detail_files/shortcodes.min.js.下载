jQuery(function(a){"use strict";function e(a,e,t,r,o){a.hasOwnProperty("name")&&!a.name&&e.addClass("error"),a.hasOwnProperty("email")&&!a.email&&t.addClass("error"),a.hasOwnProperty("comment")&&!a.comment&&r.addClass("error"),a.hasOwnProperty("captcha")&&!a.captcha_code&&o.addClass("error")}function t(){"image"===params.captcha_type?r(a(o),a(o).attr("action")):null===s?s=grecaptcha.render(c.attr("id"),{sitekey:c.data("sitekey"),theme:"light"}):grecaptcha.reset(s)}function r(a,e){a.find(".captcha").attr("src",params.captcha_file_url+"?"+Math.random()+"&type="+e).closest(".captcha-container").removeClass("loading")}var o=".bb-contact-form";if(a(o).length){var s=null,c=a(o).find("#boombox-contact-captcha");"image"===params.captcha_type?r(a(o),a(o).attr("action")):"google"===params.captcha_type&&a("body").on("boombox/grecaptcha_loaded",function(){null===s?s=grecaptcha.render(c.attr("id"),{sitekey:c.data("boombox-sitekey"),theme:"light"}):grecaptcha.reset(s)})}a("body").on("submit",o,function(r){r.preventDefault();var o=a(this),s=o.find("[name=boombox_name]"),c=o.find("[name=boombox_email]"),n=o.find("[name=boombox_comment]"),m=o.find("[name=boombox_gdpr]"),i=null,l=o.parent().find(".bb-contact-form-msg"),d=o.find("[name=submit]");"image"===params.captcha_type?i=o.find('[name="boombox_captcha_code"]'):"google"===params.captcha_type&&(i=o.find('[name="g-recaptcha-response"]'));var p=i&&i.length?1:0;l.html("").removeClass("msg-error msg-success"),o.find(".error").removeClass("error"),d.attr("disabled","disabled");var h={action:"contact_form_submit",name:s.val(),email:c.val(),comment:n.val(),check_captcha:p};m.length&&(h.gdpr=m.is(":checked")?1:0),p&&(h.captcha=i.val()),a.post(params.ajax_url,h,function(r){var m=a.parseJSON(r);if(a.isEmptyObject(m.valid))m.sent?(l.addClass("msg-success").html(params.success_message),o[0].reset(),p&&t()):l.addClass("msg-error").html(params.wrong_message);else{var h=m.message?m.message:params.error_message;l.addClass("msg-error").html(h),p&&t(),e(m.valid,s,c,n,i)}d.removeAttr("disabled")})}),a("body").on("click",".boombox-refresh-captcha",function(e){e.preventDefault();var t=a(this).closest("form"),o=t.attr("action");r(t,o)})});